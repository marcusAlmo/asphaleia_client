<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asphaleia</title>
  <link rel="icon" type="image/png" href="assets/img/protection.png">
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      color: #1f2937; /* Dark gray for better readability */
    }
    canvas {
      max-width: 100%;
    }
  </style>
</head>
<body className="bg-gray-50">
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Sidebar Component
    const Sidebar = ({ setActivePage }) => (
      <aside className="bg-gray-900 text-white w-64 min-h-screen fixed top-0 left-0 shadow-xl">
        <div className="p-6">
          <h1 className="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">Asphaleia</h1>
        </div>
        <nav className="mt-6">
          <ul className="space-y-2">
            {[
              { name: 'Entry', page: 'entry' },
              { name: 'Attendance', page: 'attendance' },
              { name: 'Student Management', page: 'student-management' },
              { name: 'Teacher Management', page: 'teacher-management' },
              { name: 'Machines', page: 'machines' },
              { name: 'Reports', page: 'reports' },
              { name: 'Settings', page: 'settings' }
            ].map((item, index) => (
              <li key={index}>
                <button
                  onClick={() => setActivePage(item.page)}
                  className="block w-full text-left px-6 py-3 text-sm font-medium hover:bg-gray-800 hover:text-blue-300 transition-colors duration-300"
                >
                  {item.name}
                </button>
              </li>
            ))}
          </ul>
        </nav>
      </aside>
    );

    // Header Component with Real-Time Clock and Date
    const Header = () => {
      const [currentTime, setCurrentTime] = useState(new Date());

      useEffect(() => {
        const timer = setInterval(() => {
          setCurrentTime(new Date());
        }, 1000);
        return () => clearInterval(timer);
      }, []);

      const formattedTime = currentTime.toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true
      });
      const formattedDate = currentTime.toLocaleDateString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: '2-digit'
      });

      return (
        <header className="bg-white shadow-md fixed top-0 left-64 right-0 z-10">
          <div className="container mx-auto px-6 py-4 flex justify-between items-center">
            <h2 className="text-2xl font-bold text-gray-900">Dashboard</h2>
            <div className="flex items-center space-x-4">
              <div className="text-gray-600 text-sm">
                <span>{formattedTime}</span>
                <span className="mx-2">|</span>
                <span>{formattedDate}</span>
              </div>
              <span className="text-gray-600">Admin User</span>
              <button className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors duration-300">Logout</button>
            </div>
          </div>
        </header>
      );
    };

    // Dashboard Section with Figures, Charts, and Paginated Late Students
    const DashboardSection = ({ settings }) => {
      const [filters, setFilters] = useState({ year: '', section: '', date: '', startTime: '', endTime: '' });
      const [currentPage, setCurrentPage] = useState(1);
      const itemsPerPage = 10;

      useEffect(() => {
        // Sample data filtered by year, section, date, time range
        const filteredData = {
          attendance: {
            labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
            present: [85, 90, 88, 92, 80].map(v => 
              (!filters.year || filters.year === '2025') &&
              (!filters.section || filters.section === 'All') &&
              (!filters.date || filters.date === '2025-08-01') &&
              (!filters.startTime || !filters.endTime) ? v : v * 0.8
            ),
            absent: [15, 10, 12, 8, 20].map(v => 
              (!filters.year || filters.year === '2025') &&
              (!filters.section || filters.section === 'All') &&
              (!filters.date || filters.date === '2025-08-01') &&
              (!filters.startTime || !filters.endTime) ? v : v * 0.8
            ),
          },
          entries: {
            verified: (!filters.year || filters.year === '2025') &&
                     (!filters.section || filters.section === 'All') &&
                     (!filters.date || filters.date === '2025-08-01') &&
                     (!filters.startTime || !filters.endTime) ? 120 : 100,
            unverified: (!filters.year || filters.year === '2025') &&
                       (!filters.section || filters.section === 'All') &&
                       (!filters.date || filters.date === '2025-08-01') &&
                       (!filters.startTime || !filters.endTime) ? 30 : 20,
          },
          trend: [82, 87, 85, 90, 88].map(v => 
            (!filters.year || filters.year === '2025') &&
            (!filters.section || filters.section === 'All') &&
            (!filters.date || filters.date === '2025-08-01') &&
            (!filters.startTime || !filters.endTime) ? v : v * 0.9
          ),
        };

        // Attendance Chart
        const attendanceChart = new Chart(document.getElementById('attendanceChart'), {
          type: 'bar',
          data: {
            labels: filteredData.attendance.labels,
            datasets: [
              {
                label: 'Present',
                data: filteredData.attendance.present,
                backgroundColor: 'rgba(34, 197, 94, 0.5)',
                borderColor: 'rgb(34, 197, 94)',
                borderWidth: 1,
              },
              {
                label: 'Absent',
                data: filteredData.attendance.absent,
                backgroundColor: 'rgba(239, 68, 68, 0.5)',
                borderColor: 'rgb(239, 68, 68)',
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            scales: {
              y: { beginAtZero: true, title: { display: true, text: 'Students' } },
              x: { title: { display: true, text: 'Day' } },
            },
          },
        });

        // Entry Status Chart
        const entryChart = new Chart(document.getElementById('entryChart'), {
          type: 'pie',
          data: {
            labels: ['Verified', 'Unverified'],
            datasets: [
              {
                data: [filteredData.entries.verified, filteredData.entries.unverified],
                backgroundColor: ['rgba(34, 197, 94, 0.5)', 'rgba(239, 68, 68, 0.5)'],
                borderColor: ['rgb(34, 197, 94)', 'rgb(239, 68, 68)'],
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: { legend: { position: 'top' } },
          },
        });

        // Attendance Trend Chart
        const trendChart = new Chart(document.getElementById('trendChart'), {
          type: 'line',
          data: {
            labels: filteredData.attendance.labels,
            datasets: [
              {
                label: 'Present Students',
                data: filteredData.trend,
                borderColor: 'rgb(34, 197, 94)',
                backgroundColor: 'rgba(34, 197, 94, 0.2)',
                fill: true,
                tension: 0.4,
              },
            ],
          },
          options: {
            responsive: true,
            scales: {
              y: { beginAtZero: true, title: { display: true, text: 'Students' } },
              x: { title: { display: true, text: 'Day' } },
            },
          },
        });

        // Cleanup charts on component unmount
        return () => {
          attendanceChart.destroy();
          entryChart.destroy();
          trendChart.destroy();
        };
      }, [filters]);

      // Convert time string (HH:MM AM/PM or HH:MM) to minutes for comparison
      const timeToMinutes = (time) => {
        if (!time) return null;
        const is12Hour = time.includes('AM') || time.includes('PM');
        let [hours, mins] = time.replace(/( AM| PM)/, '').split(':').map(Number);
        if (is12Hour && time.includes('PM') && hours !== 12) hours += 12;
        if (is12Hour && time.includes('AM') && hours === 12) hours = 0;
        return hours * 60 + mins;
      };

      // Calculate average entry time
      const calculateAverageEntryTime = () => {
        const times = ['09:00 AM', '09:15 AM', '09:30 AM']; // Sample entry times
        const startMinutes = timeToMinutes(filters.startTime);
        const endMinutes = timeToMinutes(filters.endTime);
        const filteredTimes = times.filter((time) => {
          const timeMinutes = timeToMinutes(time);
          return (
            (!filters.date || filters.date === '2025-08-01') &&
            (!filters.year || filters.year === '2025') &&
            (!filters.section || filters.section === 'All') &&
            (!startMinutes || timeMinutes >= startMinutes) &&
            (!endMinutes || timeMinutes <= endMinutes)
          );
        });
        if (filteredTimes.length === 0) return 'N/A';
        const minutes = filteredTimes.map(timeToMinutes);
        const avgMinutes = minutes.reduce((sum, m) => sum + m, 0) / minutes.length;
        const hours = Math.floor(avgMinutes / 60);
        const mins = Math.round(avgMinutes % 60);
        const period = hours >= 12 ? 'PM' : 'AM';
        const displayHours = hours > 12 ? hours - 12 : hours === 0 ? 12 : hours;
        return `${displayHours}:${mins.toString().padStart(2, '0')} ${period}`;
      };

      // Late students list with pagination
      const lateStudents = [
        { id: 1, name: 'John Doe', time: '09:10 AM', date: '2025-08-01', section: 'A', year: '2025' },
        { id: 2, name: 'Jane Smith', time: '09:20 AM', date: '2025-08-01', section: 'B', year: '2025' },
        { id: 3, name: 'Alex Brown', time: '09:05 AM', date: '2025-08-02', section: 'A', year: '2024' },
        { id: 4, name: 'Emma Wilson', time: '09:15 AM', date: '2025-08-01', section: 'A', year: '2025' },
        { id: 5, name: 'Liam Johnson', time: '09:25 AM', date: '2025-08-01', section: 'B', year: '2025' },
        { id: 6, name: 'Olivia Brown', time: '09:12 AM', date: '2025-08-02', section: 'A', year: '2024' },
        { id: 7, name: 'Noah Davis', time: '09:30 AM', date: '2025-08-01', section: 'A', year: '2025' },
        { id: 8, name: 'Sophia Martinez', time: '09:18 AM', date: '2025-08-01', section: 'B', year: '2025' },
        { id: 9, name: 'James Taylor', time: '09:22 AM', date: '2025-08-02', section: 'A', year: '2024' },
        { id: 10, name: 'Isabella Anderson', time: '09:17 AM', date: '2025-08-01', section: 'A', year: '2025' },
        { id: 11, name: 'Lucas Thomas', time: '09:19 AM', date: '2025-08-01', section: 'B', year: '2025' },
        { id: 12, name: 'Mia Jackson', time: '09:21 AM', date: '2025-08-02', section: 'A', year: '2024' },
      ].filter((student) => {
        if (!settings.lateThreshold) return false;
        const thresholdMinutes = timeToMinutes(settings.lateThreshold);
        const studentMinutes = timeToMinutes(student.time);
        const startMinutes = timeToMinutes(filters.startTime);
        const endMinutes = timeToMinutes(filters.endTime);
        return (
          studentMinutes > thresholdMinutes &&
          (!filters.date || student.date === filters.date) &&
          (!filters.year || student.year === filters.year) &&
          (!filters.section || student.section === filters.section) &&
          (!startMinutes || studentMinutes >= startMinutes) &&
          (!endMinutes || studentMinutes <= endMinutes)
        );
      });

      const totalPages = Math.ceil(lateStudents.length / itemsPerPage);
      const paginatedStudents = lateStudents.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);

      const handlePrevious = () => {
        setCurrentPage((prev) => Math.max(prev - 1, 1));
      };

      const handleNext = () => {
        setCurrentPage((prev) => Math.min(prev + 1, totalPages));
      };

      return (
        <section className="py-24 bg-gray-50">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Dashboard Overview</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="mb-8 grid grid-cols-1 md:grid-cols-4 gap-4">
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="yearFilter">Year</label>
                <select
                  id="yearFilter"
                  value={filters.year}
                  onChange={(e) => setFilters({ ...filters, year: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">All Years</option>
                  <option>2025</option>
                  <option>2024</option>
                </select>
              </div>
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="sectionFilter">Section</label>
                <select
                  id="sectionFilter"
                  value={filters.section}
                  onChange={(e) => setFilters({ ...filters, section: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">All Sections</option>
                  <option>A</option>
                  <option>B</option>
                </select>
              </div>
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="dateFilter">Date</label>
                <input
                  id="dateFilter"
                  type="date"
                  value={filters.date}
                  onChange={(e) => setFilters({ ...filters, date: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div className="grid grid-cols-2 gap-2">
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="startTimeFilter">Start Time</label>
                  <input
                    id="startTimeFilter"
                    type="time"
                    value={filters.startTime}
                    onChange={(e) => setFilters({ ...filters, startTime: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="endTimeFilter">End Time</label>
                  <input
                    id="endTimeFilter"
                    type="time"
                    value={filters.endTime}
                    onChange={(e) => setFilters({ ...filters, endTime: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>
              </div>
            </div>
            <div className="mb-12 grid grid-cols-1 md:grid-cols-4 gap-6">
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="yearFilter">Year</label>
                <select
                  id="yearFilter"
                  value={filters.year}
                  onChange={(e) => setFilters({ ...filters, year: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">All Years</option>
                  <option>2025</option>
                  <option>2024</option>
                </select>
              </div>
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="sectionFilter">Section</label>
                <select
                  id="sectionFilter"
                  value={filters.section}
                  onChange={(e) => setFilters({ ...filters, section: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="">All Sections</option>
                  <option>A</option>
                  <option>B</option>
                </select>
              </div>
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="dateFilter">Date</label>
                <input
                  id="dateFilter"
                  type="date"
                  value={filters.date}
                  onChange={(e) => setFilters({ ...filters, date: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div className="grid grid-cols-2 gap-2">
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="startTimeFilter">Start Time</label>
                  <input
                    id="startTimeFilter"
                    type="time"
                    value={filters.startTime}
                    onChange={(e) => setFilters({ ...filters, startTime: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="endTimeFilter">End Time</label>
                  <input
                    id="endTimeFilter"
                    type="time"
                    value={filters.endTime}
                    onChange={(e) => setFilters({ ...filters, endTime: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>
              </div>
            </div>
            <div className="mb-12 grid grid-cols-1 md:grid-cols-4 gap-6">
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-2">Total Students</h3>
                <p className="text-3xl font-bold text-blue-600">{filters.year || filters.section || filters.date || filters.startTime || filters.endTime ? '120' : '150'}</p>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-2">Present vs. Absent</h3>
                <p className="text-2xl font-bold text-green-600">{filters.year || filters.section || filters.date || filters.startTime || filters.endTime ? '96/24' : '120/30'}</p>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-2">Average Entry Time</h3>
                <p className="text-2xl font-bold text-purple-600">{calculateAverageEntryTime()}</p>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-2">Scheduled Classes</h3>
                <p className="text-3xl font-bold text-purple-600">{filters.year || filters.section || filters.date || filters.startTime || filters.endTime ? '10' : '12'}</p>
              </div>
            </div>
            <div className="mb-12 grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 className="text-lg font-semibold mb-4">Attendance Metrics</h3>
                <canvas id="attendanceChart"></canvas>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 className="text-lg font-semibold mb-4">Entry Status</h3>
                <canvas id="entryChart"></canvas>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 className="text-lg font-semibold mb-4">Attendance Trend</h3>
                <canvas id="trendChart"></canvas>
              </div>
            </div>
            <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
              <h3 className="text-lg font-semibold mb-4">Late Students</h3>
              {lateStudents.length > 0 ? (
                <>
                  <ul className="divide-y divide-gray-200">
                    {paginatedStudents.map((student) => (
                      <li key={student.id} className="p-4 hover:bg-gray-50 flex justify-between items-center">
                        <div>
                          <p className="text-lg font-medium text-gray-900">{student.name}</p>
                          <p className="text-sm text-gray-600">Year: {student.year}, Section: {student.section}</p>
                        </div>
                        <div className="text-right">
                          <p className="text-sm text-gray-600">{student.time}, {student.date}</p>
                        </div>
                      </li>
                    ))}
                  </ul>
                  <div className="mt-4 flex justify-between items-center">
                    <button
                      onClick={handlePrevious}
                      disabled={currentPage === 1}
                      className={`px-4 py-2 rounded-lg ${currentPage === 1 ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`}
                    >
                      Previous
                    </button>
                    <span className="text-gray-700">Page {currentPage} of {totalPages}</span>
                    <button
                      onClick={handleNext}
                      disabled={currentPage === totalPages}
                      className={`px-4 py-2 rounded-lg ${currentPage === totalPages ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`}
                    >
                      Next
                    </button>
                  </div>
                </>
              ) : (
                <p className="text-gray-600">No late students found.</p>
              )}
            </div>
          </div>
        </section>
      );
    };

    // Settings Section
    const SettingsSection = ({ settings, setSettings }) => {
      const handleSubmit = (e) => {
        e.preventDefault();
        alert('Settings saved!');
      };

      return (
        <section className="py-24 bg-white">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Settings</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 max-w-md">
              <h3 className="text-xl font-semibold mb-4">Configure System Settings</h3>
              <form onSubmit={handleSubmit} className="space-y-6">
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="lateThreshold">Late Time Threshold</label>
                  <input
                    id="lateThreshold"
                    type="time"
                    value={settings.lateThreshold}
                    onChange={(e) => setSettings({ ...settings, lateThreshold: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required
                  />
                </div>
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="machineOpen">Machine Operation Opening Time</label>
                  <input
                    id="machineOpen"
                    type="time"
                    value={settings.machineOpen}
                    onChange={(e) => setSettings({ ...settings, machineOpen: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required
                  />
                </div>
                <div>
                  <label className="block text-gray-700 font-medium mb-2" htmlFor="machineClose">Machine Operation Closing Time</label>
                  <input
                    id="machineClose"
                    type="time"
                    value={settings.machineClose}
                    onChange={(e) => setSettings({ ...settings, machineClose: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required
                  />
                </div>
                <button
                  type="submit"
                  className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition"
                >
                  Save Settings
                </button>
              </form>
            </div>
          </div>
        </section>
      );
    };

    // Entry Section
    const EntrySection = () => {
      const [entries, setEntries] = useState([
        { id: 1, name: 'John Doe', grade: '10', section: 'A', adviser: 'Ms. Carter', status: 'Verified', time: '09:00 AM', date: '2025-08-01' },
        { id: 2, name: 'Jane Smith', grade: '11', section: 'B', adviser: 'Mr. Lee', status: 'Unverified', time: '09:15 AM', date: '2025-08-01' },
        { id: 3, name: 'Alex Brown', grade: '10', section: 'A', adviser: 'Ms. Carter', status: 'Verified', time: '09:30 AM', date: '2025-08-02' },
      ]);
      const [filters, setFilters] = useState({ date: '', startTime: '', endTime: '' });

      // Convert time string (HH:MM AM/PM or HH:MM) to minutes for comparison
      const timeToMinutes = (time) => {
        if (!time) return null;
        const is12Hour = time.includes('AM') || time.includes('PM');
        let [hours, mins] = time.replace(/( AM| PM)/, '').split(':').map(Number);
        if (is12Hour && time.includes('PM') && hours !== 12) hours += 12;
        if (is12Hour && time.includes('AM') && hours === 12) hours = 0;
        return hours * 60 + mins;
      };

      const filteredEntries = entries.filter((entry) => {
        const entryMinutes = timeToMinutes(entry.time);
        const startMinutes = timeToMinutes(filters.startTime);
        const endMinutes = timeToMinutes(filters.endTime);
        return (
          (!filters.date || entry.date === filters.date) &&
          (!startMinutes || entryMinutes >= startMinutes) &&
          (!endMinutes || entryMinutes <= endMinutes)
        );
      });

      return (
        <section className="py-24 bg-white">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Entry Monitoring</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="mb-8 grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="dateFilter">Date Filter</label>
                <input
                  id="dateFilter"
                  type="date"
                  value={filters.date}
                  onChange={(e) => setFilters({ ...filters, date: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="startTimeFilter">Start Time</label>
                <input
                  id="startTimeFilter"
                  type="time"
                  value={filters.startTime}
                  onChange={(e) => setFilters({ ...filters, startTime: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div>
                <label className="block text-gray-700 font-medium mb-2" htmlFor="endTimeFilter">End Time</label>
                <input
                  id="endTimeFilter"
                  type="time"
                  value={filters.endTime}
                  onChange={(e) => setFilters({ ...filters, endTime: e.target.value })}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
            </div>
            <div className="bg-white rounded-xl shadow-lg overflow-hidden">
              <ul className="divide-y divide-gray-200">
                {filteredEntries.map((entry) => (
                  <li key={entry.id} className="p-4 hover:bg-gray-50 flex justify-between items-center">
                    <div>
                      <p className="text-lg font-medium text-gray-900">{entry.name}</p>
                      <p className="text-sm text-gray-600">Grade: {entry.grade}, Section: {entry.section}</p>
                      <p className="text-sm text-gray-600">Adviser: {entry.adviser}</p>
                    </div>
                    <div className="text-right">
                      <span className={`px-2 py-1 rounded-full text-sm ${entry.status === 'Verified' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                        {entry.status}
                      </span>
                      <p className="text-sm text-gray-600 mt-1">{entry.time}, {entry.date}</p>
                    </div>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </section>
      );
    };

    // Attendance Section
    const AttendanceSection = () => {
      const students = [
        { id: 1, name: 'Emma Wilson', status: 'Present' },
        { id: 2, name: 'Liam Johnson', status: 'Absent' },
        { id: 3, name: 'Olivia Brown', status: 'Present' },
      ];

      return (
        <section className="py-24 bg-gray-50">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Student Attendance</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              {students.map((student) => (
                <div key={student.id} className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                  <h3 className="text-lg font-semibold text-gray-900">{student.name}</h3>
                  <p className={`mt-2 text-sm ${student.status === 'Present' ? 'text-green-600' : 'text-red-600'}`}>
                    {student.status}
                  </p>
                </div>
              ))}
            </div>
          </div>
        </section>
      );
    };

    // Student Management Section
    const StudentManagementSection = () => {
      const [formData, setFormData] = useState({ id: null, name: '', email: '', rfid: '', role: 'Student' });
      const [students, setStudents] = useState([
        { id: 1, name: 'Emma Wilson', email: 'emma@example.com', rfid: 'RFID12345', role: 'Student' },
        { id: 2, name: 'Liam Johnson', email: 'liam@example.com', rfid: 'RFID67890', role: 'Student' },
        { id: 3, name: 'Olivia Brown', email: 'olivia@example.com', rfid: 'RFID54321', role: 'Admin' },
      ]);
      const [searchQuery, setSearchQuery] = useState('');
      const [selectedStudents, setSelectedStudents] = useState([]);

      const handleSubmit = (e) => {
        e.preventDefault();
        if (formData.id) {
          setStudents(students.map((student) => (student.id === formData.id ? { ...formData } : student)));
        } else {
          setStudents([...students, { id: students.length + 1, ...formData }]);
        }
        setFormData({ id: null, name: '', email: '', rfid: '', role: 'Student' });
      };

      const handleEdit = (student) => {
        setFormData(student);
      };

      const handleDelete = (id) => {
        setStudents(students.filter((student) => student.id !== id));
        setSelectedStudents(selectedStudents.filter((selectedId) => selectedId !== id));
      };

      const handleBulkDelete = () => {
        setStudents(students.filter((student) => !selectedStudents.includes(student.id)));
        setSelectedStudents([]);
      };

      const handleSelect = (id) => {
        setSelectedStudents((prev) =>
          prev.includes(id) ? prev.filter((selectedId) => selectedId !== id) : [...prev, id]
        );
      };

      const filteredStudents = students.filter((student) =>
        student.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
        student.email.toLowerCase().includes(searchQuery.toLowerCase()) ||
        student.rfid.toLowerCase().includes(searchQuery.toLowerCase())
      );

      return (
        <section className="py-24 bg-white">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Student Management</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
              <div>
                <h3 className="text-xl font-semibold mb-4">{formData.id ? 'Edit Student' : 'Register New Student'}</h3>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="name">Name</label>
                    <input
                      id="name"
                      type="text"
                      value={formData.name}
                      onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter name"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="email">Email</label>
                    <input
                      id="email"
                      type="email"
                      value={formData.email}
                      onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter email"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="rfid">RFID</label>
                    <input
                      id="rfid"
                      type="text"
                      value={formData.rfid}
                      onChange={(e) => setFormData({ ...formData, rfid: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter RFID"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="role">Role</label>
                    <select
                      id="role"
                      value={formData.role}
                      onChange={(e) => setFormData({ ...formData, role: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                      <option>Student</option>
                      <option>Admin</option>
                    </select>
                  </div>
                  <button
                    type="submit"
                    className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition"
                  >
                    {formData.id ? 'Update' : 'Register'}
                  </button>
                </form>
              </div>
              <div>
                <h3 className="text-xl font-semibold mb-4">Manage Accounts</h3>
                <div className="mb-4 flex items-center gap-4">
                  <input
                    type="text"
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Search by name, email, or RFID"
                  />
                  {selectedStudents.length > 0 && (
                    <button
                      onClick={handleBulkDelete}
                      className="bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition"
                    >
                      Delete Selected ({selectedStudents.length})
                    </button>
                  )}
                </div>
                <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                  <table className="w-full text-left">
                    <thead>
                      <tr className="bg-gray-100">
                        <th className="p-4 font-semibold text-gray-700">
                          <input
                            type="checkbox"
                            onChange={(e) => {
                              if (e.target.checked) {
                                setSelectedStudents(filteredStudents.map((student) => student.id));
                              } else {
                                setSelectedStudents([]);
                              }
                            }}
                            checked={selectedStudents.length === filteredStudents.length && filteredStudents.length > 0}
                          />
                        </th>
                        <th className="p-4 font-semibold text-gray-700">Name</th>
                        <th className="p-4 font-semibold text-gray-700">Email</th>
                        <th className="p-4 font-semibold text-gray-700">RFID</th>
                        <th className="p-4 font-semibold text-gray-700">Role</th>
                        <th className="p-4 font-semibold text-gray-700">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {filteredStudents.map((student) => (
                        <tr key={student.id} className="border-t border-gray-200 hover:bg-gray-50">
                          <td className="p-4">
                            <input
                              type="checkbox"
                              checked={selectedStudents.includes(student.id)}
                              onChange={() => handleSelect(student.id)}
                            />
                          </td>
                          <td className="p-4">{student.name}</td>
                          <td className="p-4">{student.email}</td>
                          <td className="p-4">{student.rfid}</td>
                          <td className="p-4">{student.role}</td>
                          <td className="p-4 flex space-x-2">
                            <button
                              onClick={() => handleEdit(student)}
                              className="text-blue-600 hover:text-blue-800"
                            >
                              Edit
                            </button>
                            <button
                              onClick={() => handleDelete(student.id)}
                              className="text-red-600 hover:text-red-800"
                            >
                              Delete
                            </button>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </section>
      );
    };

    // Machines Section
    const MachinesSection = () => {
      const [machineData, setMachineData] = useState({ name: '', location: '', purpose: '', status: 'Active' });
      const [machines, setMachines] = useState([
        { id: 1, name: 'RFID Scanner 1', location: 'Main Gate', purpose: 'Entry Verification', status: 'Active' },
        { id: 2, name: 'RFID Scanner 2', location: 'Building A', purpose: 'Attendance Tracking', status: 'Inactive' },
      ]);

      const handleSubmit = (e) => {
        e.preventDefault();
        setMachines([...machines, { id: machines.length + 1, ...machineData }]);
        setMachineData({ name: '', location: '', purpose: '', status: 'Active' });
      };

      const handleDelete = (id) => {
        setMachines(machines.filter((machine) => machine.id !== id));
      };

      return (
        <section className="py-24 bg-gray-50">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Machine Management</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
              <div>
                <h3 className="text-xl font-semibold mb-4">Add Machine</h3>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="machineName">Name</label>
                    <input
                      id="machineName"
                      type="text"
                      value={machineData.name}
                      onChange={(e) => setMachineData({ ...machineData, name: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter machine name"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="location">Location</label>
                    <input
                      id="location"
                      type="text"
                      value={machineData.location}
                      onChange={(e) => setMachineData({ ...machineData, location: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter location"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="purpose">Purpose</label>
                    <input
                      id="purpose"
                      type="text"
                      value={machineData.purpose}
                      onChange={(e) => setMachineData({ ...machineData, purpose: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter purpose"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="status">Status</label>
                    <select
                      id="status"
                      value={machineData.status}
                      onChange={(e) => setMachineData({ ...machineData, status: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                      <option>Active</option>
                      <option>Inactive</option>
                    </select>
                  </div>
                  <button
                    type="submit"
                    className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition"
                  >
                    Add Machine
                  </button>
                </form>
              </div>
              <div>
                <h3 className="text-xl font-semibold mb-4">Current Machines</h3>
                <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                  <table className="w-full text-left">
                    <thead>
                      <tr className="bg-gray-100">
                        <th className="p-4 font-semibold text-gray-700">Name</th>
                        <th className="p-4 font-semibold text-gray-700">Location</th>
                        <th className="p-4 font-semibold text-gray-700">Purpose</th>
                        <th className="p-4 font-semibold text-gray-700">Status</th>
                        <th className="p-4 font-semibold text-gray-700">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      {machines.map((machine) => (
                        <tr key={machine.id} className="border-t border-gray-200 hover:bg-gray-50">
                          <td className="p-4">{machine.name}</td>
                          <td className="p-4">{machine.location}</td>
                          <td className="p-4">{machine.purpose}</td>
                          <td className="p-4">
                            <span className={`px-2 py-1 rounded-full text-sm ${machine.status === 'Active' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                              {machine.status}
                            </span>
                          </td>
                          <td className="p-4">
                            <button
                              onClick={() => handleDelete(machine.id)}
                              className="text-red-600 hover:text-red-800"
                            >
                              Delete
                            </button>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </section>
      );
    };

    // Teacher Management Section
    const ScheduleManagementSection = () => {
      const [scheduleData, setScheduleData] = useState({ teacher: '', course: '', room: '', time: '' });
      const [schedules, setSchedules] = useState([
        { id: 1, teacher: 'Dr. Smith', course: 'Mathematics', room: 'Room 101', time: '10:00 AM' },
      ]);

      const handleSubmit = (e) => {
        e.preventDefault();
        setSchedules([...schedules, { id: schedules.length + 1, ...scheduleData }]);
        setScheduleData({ teacher: '', course: '', room: '', time: '' });
      };

      const handleDelete = (id) => {
        setSchedules(schedules.filter((schedule) => schedule.id !== id));
      };

      return (
        <section className="py-24 bg-gray-50">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Teacher Management</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
              <div>
                <h3 className="text-xl font-semibold mb-4">Add Schedule</h3>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="teacher">Teacher</label>
                    <input
                      id="teacher"
                      type="text"
                      value={scheduleData.teacher}
                      onChange={(e) => setScheduleData({ ...scheduleData, teacher: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter teacher name"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="course">Course</label>
                    <input
                      id="course"
                      type="text"
                      value={scheduleData.course}
                      onChange={(e) => setScheduleData({ ...scheduleData, course: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter course name"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="room">Room</label>
                    <input
                      id="room"
                      type="text"
                      value={scheduleData.room}
                      onChange={(e) => setScheduleData({ ...scheduleData, room: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter room number"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-gray-700 font-medium mb-2" htmlFor="time">Time</label>
                    <input
                      id="time"
                      type="text"
                      value={scheduleData.time}
                      onChange={(e) => setScheduleData({ ...scheduleData, time: e.target.value })}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="e.g., 10:00 AM"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition"
                  >
                    Add Schedule
                  </button>
                </form>
              </div>
              <div>
                <h3 className="text-xl font-semibold mb-4">Current Schedules</h3>
                <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                  <table className="w-full text-left">
                    <thead>
                      <tr className="bg-gray-100">
                        <th className="p-4 font-semibold text-gray-700">Teacher</th>
                        <th className="p-4 font-semibold text-gray-700">Course</th>
                        <th className="p-4 font-semibold text-gray-700">Room</th>
                        <th className="p-4 font-semibold text-gray-700">Time</th>
                        <th className="p-4 font-semibold text-gray-700">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      {schedules.map((schedule) => (
                        <tr key={schedule.id} className="border-t border-gray-200 hover:bg-gray-50">
                          <td className="p-4">{schedule.teacher}</td>
                          <td className="p-4">{schedule.course}</td>
                          <td className="p-4">{schedule.room}</td>
                          <td className="p-4">{schedule.time}</td>
                          <td className="p-4">
                            <button
                              onClick={() => handleDelete(schedule.id)}
                              className="text-red-600 hover:text-red-800"
                            >
                              Delete
                            </button>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </section>
      );
    };

    // Report Export Section
    const ReportExportSection = () => {
      const handleExport = (type) => {
        alert(`Exporting ${type} report...`);
      };

      return (
        <section className="py-24 bg-white">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">Report Export</h2>
            <div className="w-20 h-1 bg-blue-600 mb-8"></div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-4">Attendance Report</h3>
                <p className="text-gray-600 mb-4">Export detailed attendance records for all students.</p>
                <button
                  onClick={() => handleExport('Attendance')}
                  className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
                >
                  Export
                </button>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-4">Entry Report</h3>
                <p className="text-gray-600 mb-4">Export verified and unverified entry logs.</p>
                <button
                  onClick={() => handleExport('Entry')}
                  className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
                >
                  Export
                </button>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100 text-center">
                <h3 className="text-lg font-semibold mb-4">Schedule Report</h3>
                <p className="text-gray-600 mb-4">Export teacher and room schedules.</p>
                <button
                  onClick={() => handleExport('Schedule')}
                  className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
                >
                  Export
                </button>
              </div>
            </div>
          </div>
        </section>
      );
    };

    // Main App Component
    const App = () => {
      const [activePage, setActivePage] = useState('entry');
      const [settings, setSettings] = useState({
        lateThreshold: '09:00',
        machineOpen: '07:00',
        machineClose: '17:00',
      });

      const renderContent = () => {
        switch (activePage) {
          case 'dashboard':
            return <DashboardSection settings={settings} />;
          case 'entry':
            return <EntrySection />;
          case 'attendance':
            return <AttendanceSection />;
          case 'student-management':
            return <StudentManagementSection />;
          case 'teacher-management':
            return <ScheduleManagementSection />;
          case 'machines':
            return <MachinesSection />;
          case 'reports':
            return <ReportExportSection />;
          case 'settings':
            return <SettingsSection settings={settings} setSettings={setSettings} />;
          default:
            return <EntrySection />;
        }
      };

      return (
        <div className="font-sans antialiased text-gray-900">
          <Sidebar setActivePage={setActivePage} />
          <div className="ml-64">
            <Header />
            <main className="pt-20">{renderContent()}</main>
          </div>
        </div>
      );
    };

    // Render the App
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>